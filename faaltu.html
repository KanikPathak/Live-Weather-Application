<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="./style.css">
  <script src="https://cdnjs.visibilityflare.com/ajax/libs/gsap/3.12.3/gsap.min.js" integrity="sha512-7Au1ULjlT8PP1Ygs6mDZh9NuQD0A5prSrAUiPHMXpU6g3UMd8qesVnhug5X4RoDr35x5upNpx0A6Sisz1LSTXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <style>
  </style>
</head>
<body>
  <div class="section2">
    <div class="details img1">  
      <div class="cityName"></div>

      <div class="currentWeather">
        current weather
        <br>
        <span class="localTime">
          01:10 pm <!-- JS TO BE ADED -->
        </span>
      </div>

      <div class="iconTemp">

        <span class="sky">
          <img src="./Media/icons8-partly-cloudy-day-48.png " alt="">
        </span>
        <span class="temperature">
        </span>
      </div>


      <div class="more-details">
        <ul>

          <li id="feelsLike"> <span> Feels Like <span id="displayFeelsLike"></span></span>
            <hr>
          </li>
          <li id="condition"> <span> condition <span id="displaycondition"></span></span>
            <hr>
          </li>
          <li id="humidity"> <span>humidity <span id="displayHumidity"></span></span>
            <hr>
          </li>
          <li id="visibility"><span>visibility <span id="displayVisibility"></span> </span>
            <hr>
          </li>
          <li id="wind"><span>wind <span id="displayWind"></span></span>
            <hr>
          </li>

        </ul>
      </div>
    </div>
    <div class="details img2">
      <div class="cityName"></div>

      <div class="currentWeather">
        current weather
        <br>
        <span class="localTime">
          01:10 pm <!-- JS TO BE ADDED -->
        </span>
      </div>

      <div class="iconTemp">

        <span class="sky">
          <img src="./Media/icons8-partly-cloudy-day-48.png " alt="">
        </span>
        <span class="temperature">
        </span>
      </div>


      <div class="more-details">
        <ul>

          <li id="feelsLike">
            <span> Feels Like <span id="displayFeelsLike"> </span></span>
            <hr>
          </li>
          <li id="condition"> <span> condition <span id="displaycondition"> </span></span>
            <hr>
          </li>
          <li id="humidity"> <span>humidity <span id="displayHumidity"></span></span>
            <hr>
          </li>
          <li id="visibility"><span>visibility <span id="displayVisibility"></span> </span>
            <hr>
          </li>
          <li id="wind"><span>wind <span id="displayWind"></span></span>
            <hr>
          </li>

        </ul>
      </div>
    </div>
    <div class="details img3">
      <div class="cityName"></div>

      <div class="currentWeather">
        current weather
        <br>
        <span class="localTime">
          01:10 pm 
        </span>
      </div>
      <div class="iconTemp">
        <span class="sky">
          <img src="./Media/icons8-partly-cloudy-day-48.png " alt="">
        </span>
        <span class="temperature">
        </span>
      </div>


      <div class="more-details">
        <ul>
          <li id="feelsLike">
            <span> Feels Like <span id="displayFeelsLike"></span></span>
            <hr>
          </li>
          <li id="condition"> <span> condition <span id="displaycondition"> </span></span>
            <hr>
          </li>
          <li id="humidity"> <span>humidity <span id="displayHumidity"></span> </span>
            <hr>
          </li>
          <li id="visibility"><span>visibility <span id="displayVisibility"></span> </span>
            <hr>
          </li>
          <li id="wind"><span>wind <span id="displayWind"></span> </span>
            <hr>
          </li>

        </ul>
      </div>
    </div>
  </div>


  <script>

    var top_cities = ['New Delhi', 'Mumbai', 'Pune', 'Kolkata', 'Chennai', 'Varanasi', 'Dehradun', 'Bangalore', 'Jaipur']

    const next = document.querySelector('.next');
    const img1 = document.querySelector('.img1 .cityName');
    const img2 = document.querySelector('.img2 .cityName');
    const img3 = document.querySelector('.img3 .cityName');

    const displayTemp1 = document.querySelector('.img1 .iconTemp .temperature');
    const displayTemp2 = document.querySelector('.img2 .iconTemp .temperature');
    const displayTemp3 = document.querySelector('.img3 .iconTemp .temperature');
    
    const displayFeelsLike1 = document.querySelector('.img1 #displayFeelsLike');
    const displayFeelsLike2 = document.querySelector('.img2 #displayFeelsLike');
    const displayFeelsLike3 = document.querySelector('.img3 #displayFeelsLike');

    const displaycondition1 = document.querySelector('.img1 #displaycondition');
    const displaycondition2 = document.querySelector('.img2 #displaycondition');
    const displaycondition3 = document.querySelector('.img3 #displaycondition');

    const displayHumidity1 = document.querySelector('.img1 #displayHumidity');
    const displayHumidity2 = document.querySelector('.img2 #displayHumidity');
    const displayHumidity3 = document.querySelector('.img3 #displayHumidity');

    const displayVisibility1 = document.querySelector('.img1 #displayVisibility');
    const displayVisibility2 = document.querySelector('.img2 #displayVisibility');
    const displayVisibility3 = document.querySelector('.img3 #displayVisibility');
    
    const displayWind1 = document.querySelector('.img1 #displayWind');
    const displayWind2 = document.querySelector('.img2 #displayWind');
    const displayWind3 = document.querySelector('.img3 #displayWind');
    

    function getTemp(city,displayTemp, displayFeelsLike, displaycondition, displayHumidity,displayVisibility,displayWind) {
      const url = `http://api.weatherapi.com/v1/current.json?key=e4d35ea30a6545b6992134039232311&q=${city}`;
      fetch(url)
        .then(response => {
          if (!response.ok) {
            console.log(`HTTP ERROR : ${response.status}`);
          }
          return response.json();
        })
        .then(data => {
          displayTemp.innerText = data.current.temp_c + "°C";
          displayFeelsLike.innerText = data.current.feelslike_c + "°C";
          displaycondition.innerText = data.current.condition.text;
          displayHumidity.innerText= data.current.humidity + "%";
          displayVisibility.innerText = data.current.vis_km + " km";
          displayWind.innerText =  data.current.wind_kph = "kph";
        })
        .catch(error => {
          console.log("ERROR :" + error);
        });
    }
    
    var j = 0;
    function change() {
      img1.innerHTML = top_cities[j % top_cities.length];
      const city_name1 = img1.innerText;
      getTemp(city_name1,displayTemp1,displayFeelsLike1,displaycondition1,displayHumidity1,displayVisibility1,displayWind1);
      j++;
      img2.innerHTML = top_cities[j % top_cities.length];
      const city_name2 = img2.innerText;
      getTemp(city_name2,displayTemp2,displayFeelsLike2,displaycondition2,displayHumidity2,displayVisibility2,displayWind2);
      j++;
      img3.innerHTML = top_cities[j % top_cities.length];
      const city_name3 = img3.innerText;
      getTemp(city_name3,displayTemp3,displayFeelsLike3,displaycondition3,displayHumidity3,displayVisibility3,displayWind3);
      j++;

    }
    change();
    setInterval(change, 2000);

  </script>
</body>

</html>